{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport React from 'react';\nexport var StateType = function StateType() {\n  _classCallCheck(this, StateType);\n};\nvar instanceId = 0;\nexport var Tabs = function (_React$PureComponent) {\n  _inherits(Tabs, _React$PureComponent);\n\n  function Tabs(props) {\n    _classCallCheck(this, Tabs);\n\n    var _this = _possibleConstructorReturn(this, (Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call(this, props));\n\n    _this.tabCache = {};\n\n    _this.isTabVertical = function () {\n      var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.props.tabDirection;\n      return direction === 'vertical';\n    };\n\n    _this.shouldRenderTab = function (idx) {\n      var _this$props$prerender = _this.props.prerenderingSiblingsNumber,\n          prerenderingSiblingsNumber = _this$props$prerender === undefined ? 0 : _this$props$prerender;\n      var _this$state$currentTa = _this.state.currentTab,\n          currentTab = _this$state$currentTa === undefined ? 0 : _this$state$currentTa;\n      return currentTab - prerenderingSiblingsNumber <= idx && idx <= currentTab + prerenderingSiblingsNumber;\n    };\n\n    _this.getOffsetIndex = function (current, width) {\n      var threshold = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.props.distanceToChangeTab || 0;\n      var ratio = Math.abs(current / width);\n      var direction = ratio > _this.state.currentTab ? '<' : '>';\n      var index = Math.floor(ratio);\n\n      switch (direction) {\n        case '<':\n          return ratio - index > threshold ? index + 1 : index;\n\n        case '>':\n          return 1 - ratio + index > threshold ? index : index + 1;\n\n        default:\n          return Math.round(ratio);\n      }\n    };\n\n    _this.getSubElements = function () {\n      var children = _this.props.children;\n      var subElements = {};\n      return function () {\n        var defaultPrefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '$i$-';\n        var allPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '$ALL$';\n\n        if (Array.isArray(children)) {\n          children.forEach(function (child, index) {\n            if (child.key) {\n              subElements[child.key] = child;\n            }\n\n            subElements['' + defaultPrefix + index] = child;\n          });\n        } else if (children) {\n          subElements[allPrefix] = children;\n        }\n\n        return subElements;\n      };\n    };\n\n    _this.state = {\n      currentTab: _this.getTabIndex(props)\n    };\n    _this.nextCurrentTab = _this.state.currentTab;\n    _this.instanceId = instanceId++;\n    return _this;\n  }\n\n  _createClass(Tabs, [{\n    key: 'getTabIndex',\n    value: function getTabIndex(props) {\n      var page = props.page,\n          initialPage = props.initialPage,\n          tabs = props.tabs;\n      var param = (page !== undefined ? page : initialPage) || 0;\n      var index = 0;\n\n      if (typeof param === 'string') {\n        tabs.forEach(function (t, i) {\n          if (t.key === param) {\n            index = i;\n          }\n        });\n      } else {\n        index = param || 0;\n      }\n\n      return index < 0 ? 0 : index;\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.page !== nextProps.page && nextProps.page !== undefined) {\n        this.goToTab(this.getTabIndex(nextProps), true);\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.prevCurrentTab = this.state.currentTab;\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.prevCurrentTab = this.state.currentTab;\n    }\n  }, {\n    key: 'goToTab',\n    value: function goToTab(index) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var newState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (!force && this.nextCurrentTab === index) {\n        return false;\n      }\n\n      this.nextCurrentTab = index;\n      var _props = this.props,\n          tabs = _props.tabs,\n          onChange = _props.onChange;\n\n      if (index >= 0 && index < tabs.length) {\n        if (!force) {\n          onChange && onChange(tabs[index], index);\n\n          if (this.props.page !== undefined) {\n            return false;\n          }\n        }\n\n        this.setState(_extends({\n          currentTab: index\n        }, newState));\n      }\n\n      return true;\n    }\n  }, {\n    key: 'tabClickGoToTab',\n    value: function tabClickGoToTab(index) {\n      this.goToTab(index);\n    }\n  }, {\n    key: 'getTabBarBaseProps',\n    value: function getTabBarBaseProps() {\n      var currentTab = this.state.currentTab;\n      var _props2 = this.props,\n          animated = _props2.animated,\n          onTabClick = _props2.onTabClick,\n          tabBarActiveTextColor = _props2.tabBarActiveTextColor,\n          tabBarBackgroundColor = _props2.tabBarBackgroundColor,\n          tabBarInactiveTextColor = _props2.tabBarInactiveTextColor,\n          tabBarPosition = _props2.tabBarPosition,\n          tabBarTextStyle = _props2.tabBarTextStyle,\n          tabBarUnderlineStyle = _props2.tabBarUnderlineStyle,\n          tabs = _props2.tabs;\n      return {\n        activeTab: currentTab,\n        animated: !!animated,\n        goToTab: this.tabClickGoToTab.bind(this),\n        onTabClick: onTabClick,\n        tabBarActiveTextColor: tabBarActiveTextColor,\n        tabBarBackgroundColor: tabBarBackgroundColor,\n        tabBarInactiveTextColor: tabBarInactiveTextColor,\n        tabBarPosition: tabBarPosition,\n        tabBarTextStyle: tabBarTextStyle,\n        tabBarUnderlineStyle: tabBarUnderlineStyle,\n        tabs: tabs,\n        instanceId: this.instanceId\n      };\n    }\n  }, {\n    key: 'renderTabBar',\n    value: function renderTabBar(tabBarProps, DefaultTabBar) {\n      var renderTabBar = this.props.renderTabBar;\n\n      if (renderTabBar === false) {\n        return null;\n      } else if (renderTabBar) {\n        // return React.cloneElement(this.props.renderTabBar(props), props);\n        return renderTabBar(tabBarProps);\n      } else {\n        return React.createElement(DefaultTabBar, tabBarProps);\n      }\n    }\n  }, {\n    key: 'getSubElement',\n    value: function getSubElement(tab, index, subElements) {\n      var defaultPrefix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '$i$-';\n      var allPrefix = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '$ALL$';\n      var key = tab.key || '' + defaultPrefix + index;\n      var elements = subElements(defaultPrefix, allPrefix);\n      var component = elements[key] || elements[allPrefix];\n\n      if (component instanceof Function) {\n        component = component(tab, index);\n      }\n\n      return component || null;\n    }\n  }]);\n\n  return Tabs;\n}(React.PureComponent);\nTabs.defaultProps = {\n  tabBarPosition: 'top',\n  initialPage: 0,\n  swipeable: true,\n  animated: true,\n  prerenderingSiblingsNumber: 1,\n  tabs: [],\n  destroyInactiveTab: false,\n  usePaged: true,\n  tabDirection: 'horizontal',\n  distanceToChangeTab: .3\n};","map":null,"metadata":{},"sourceType":"module"}