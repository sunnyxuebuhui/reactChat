{"ast":null,"code":"import \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport axios from 'axios';\nimport * as actionTypes from './actionTypes';\nimport { fromJS } from 'immutable';\n\nvar getRegisterInfo = function getRegisterInfo(data) {\n  return {\n    type: actionTypes.GET_REGISTER,\n    data: fromJS(data)\n  };\n};\n\nfunction verifyUserInfo(user) {\n  var flag = false;\n\n  if (!user.user || !user.pwd || !user.repeatPwd) {\n    _Toast.info('用户名密码必须输入！');\n\n    flag = true;\n    return flag;\n  }\n\n  if (user.pwd !== user.repeatPwd) {\n    _Toast.info('密码和确认密码必须相同！');\n\n    flag = true;\n    return flag;\n  }\n}\n\nexport var getRegister = function getRegister(data) {\n  return function (dispatch) {\n    if (verifyUserInfo(data)) return;\n\n    _Toast.loading('加载中...');\n\n    axios.post('/user/register', data).then(function (res) {\n      _Toast.hide();\n\n      if (res.data.code === 0) {\n        dispatch(getRegisterInfo(data));\n      } else {\n        _Toast.info(res.data.msg);\n      }\n    }, function (err) {\n      _Toast.hide();\n\n      _Toast.info('服务异常');\n    });\n  };\n};","map":{"version":3,"sources":["/Users/chenyiquan/React/reactChat/src/views/register/store/actionCreators.js"],"names":["axios","actionTypes","fromJS","getRegisterInfo","data","type","GET_REGISTER","verifyUserInfo","user","flag","pwd","repeatPwd","info","getRegister","dispatch","loading","post","then","res","hide","code","msg","err"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;AACA,SAASC,MAAT,QAAuB,WAAvB;;AAGA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD;AAAA,SAAW;AACjCC,IAAAA,IAAI,EAAEJ,WAAW,CAACK,YADe;AAEjCF,IAAAA,IAAI,EAAEF,MAAM,CAACE,IAAD;AAFqB,GAAX;AAAA,CAAxB;;AAKA,SAASG,cAAT,CAAwBC,IAAxB,EAA8B;AAC5B,MAAIC,IAAI,GAAG,KAAX;;AACA,MAAI,CAACD,IAAI,CAACA,IAAN,IAAc,CAACA,IAAI,CAACE,GAApB,IAA2B,CAACF,IAAI,CAACG,SAArC,EAAiD;AAC/C,WAAMC,IAAN,CAAW,YAAX;;AACAH,IAAAA,IAAI,GAAG,IAAP;AACA,WAAOA,IAAP;AACD;;AACD,MAAID,IAAI,CAACE,GAAL,KAAaF,IAAI,CAACG,SAAtB,EAAiC;AAC/B,WAAMC,IAAN,CAAW,cAAX;;AACAH,IAAAA,IAAI,GAAG,IAAP;AACA,WAAOA,IAAP;AACD;AACF;;AAED,OAAO,IAAMI,WAAW,GAAG,SAAdA,WAAc,CAACT,IAAD,EAAU;AACnC,SAAO,UAACU,QAAD,EAAc;AACnB,QAAIP,cAAc,CAACH,IAAD,CAAlB,EAA0B;;AAC1B,WAAMW,OAAN,CAAc,QAAd;;AAEAf,IAAAA,KAAK,CAACgB,IAAN,CAAW,gBAAX,EAA6BZ,IAA7B,EAAmCa,IAAnC,CAAwC,UAAAC,GAAG,EAAI;AAC7C,aAAMC,IAAN;;AACA,UAAID,GAAG,CAACd,IAAJ,CAASgB,IAAT,KAAkB,CAAtB,EAAyB;AACvBN,QAAAA,QAAQ,CAACX,eAAe,CAACC,IAAD,CAAhB,CAAR;AACD,OAFD,MAEO;AACL,eAAMQ,IAAN,CAAWM,GAAG,CAACd,IAAJ,CAASiB,GAApB;AACD;AACF,KAPD,EAOG,UAAAC,GAAG,EAAI;AACR,aAAMH,IAAN;;AACA,aAAMP,IAAN,CAAW,MAAX;AACD,KAVD;AAWD,GAfD;AAgBD,CAjBM","sourcesContent":["import axios from 'axios';\nimport * as actionTypes from './actionTypes';\nimport { fromJS } from 'immutable';\nimport { Toast } from 'antd-mobile'\n\nconst getRegisterInfo = (data) => ({\n  type: actionTypes.GET_REGISTER,\n  data: fromJS(data),\n})\n\nfunction verifyUserInfo(user) {\n  let flag = false\n  if (!user.user || !user.pwd || !user.repeatPwd)  {\n    Toast.info('用户名密码必须输入！') \n    flag = true\n    return flag\n  }\n  if (user.pwd !== user.repeatPwd) {\n    Toast.info('密码和确认密码必须相同！') \n    flag = true\n    return flag\n  }\n}\n\nexport const getRegister = (data) => {\n  return (dispatch) => {\n    if (verifyUserInfo(data)) return\n    Toast.loading('加载中...');\n   \n    axios.post('/user/register', data).then(res => {\n      Toast.hide();\n      if (res.data.code === 0) {\n        dispatch(getRegisterInfo(data))\n      } else {\n        Toast.info(res.data.msg) \n      }\n    }, err => {\n      Toast.hide();\n      Toast.info('服务异常');\n    })\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}