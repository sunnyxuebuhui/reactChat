{"ast":null,"code":"import \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport axios from 'axios';\nimport * as actionTypes from './actionTypes';\nimport { fromJS } from 'immutable';\n\nvar getLoginInfo = function getLoginInfo(data) {\n  return {\n    type: actionTypes.GET_LOGIN_INFO,\n    data: fromJS(data)\n  };\n};\n\nfunction verifyUserInfo(user) {\n  var flag = false;\n\n  if (!user.user || !user.pwd) {\n    _Toast.info('用户名密码必须输入！');\n\n    flag = true;\n    return flag;\n  }\n}\n\nexport var getLogin = function getLogin(data) {\n  return function (dispatch) {\n    debugger;\n    if (verifyUserInfo(data)) return;\n\n    _Toast.loading('加载中...');\n\n    axios.post('/user/login', data).then(function (res) {\n      _Toast.hide();\n\n      if (res.data.code === 0) {\n        dispatch(getLoginInfo(res.data.data));\n      } else if (res.data.code === 1) {\n        _Toast.info(res.data.msg);\n      }\n    }, function (err) {\n      _Toast.hide();\n\n      _Toast.info('服务异常');\n    });\n  };\n};","map":{"version":3,"sources":["/Users/chenyiquan/React/reactChat/src/views/login/store/actionCreators.js"],"names":["axios","actionTypes","fromJS","getLoginInfo","data","type","GET_LOGIN_INFO","verifyUserInfo","user","flag","pwd","info","getLogin","dispatch","loading","post","then","res","hide","code","msg","err"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;AACA,SAASC,MAAT,QAAuB,WAAvB;;AAGA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD;AAAA,SAAW;AAC9BC,IAAAA,IAAI,EAAEJ,WAAW,CAACK,cADY;AAE9BF,IAAAA,IAAI,EAAEF,MAAM,CAACE,IAAD;AAFkB,GAAX;AAAA,CAArB;;AAKA,SAASG,cAAT,CAAwBC,IAAxB,EAA8B;AAC5B,MAAIC,IAAI,GAAG,KAAX;;AACA,MAAI,CAACD,IAAI,CAACA,IAAN,IAAc,CAACA,IAAI,CAACE,GAAxB,EAA6B;AAC3B,WAAMC,IAAN,CAAW,YAAX;;AACAF,IAAAA,IAAI,GAAG,IAAP;AACA,WAAOA,IAAP;AACD;AACF;;AAED,OAAO,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACR,IAAD,EAAU;AAChC,SAAO,UAACS,QAAD,EAAc;AACnB;AACA,QAAIN,cAAc,CAACH,IAAD,CAAlB,EAA0B;;AAC1B,WAAMU,OAAN,CAAc,QAAd;;AACAd,IAAAA,KAAK,CAACe,IAAN,CAAW,aAAX,EAA0BX,IAA1B,EAAgCY,IAAhC,CAAqC,UAAAC,GAAG,EAAI;AAC1C,aAAMC,IAAN;;AACA,UAAID,GAAG,CAACb,IAAJ,CAASe,IAAT,KAAkB,CAAtB,EAAyB;AACvBN,QAAAA,QAAQ,CAACV,YAAY,CAACc,GAAG,CAACb,IAAJ,CAASA,IAAV,CAAb,CAAR;AACD,OAFD,MAEO,IAAIa,GAAG,CAACb,IAAJ,CAASe,IAAT,KAAkB,CAAtB,EAAyB;AAC9B,eAAMR,IAAN,CAAWM,GAAG,CAACb,IAAJ,CAASgB,GAApB;AACD;AACF,KAPD,EAOG,UAAAC,GAAG,EAAI;AACR,aAAMH,IAAN;;AACA,aAAMP,IAAN,CAAW,MAAX;AACD,KAVD;AAWD,GAfD;AAgBD,CAjBM","sourcesContent":["import axios from 'axios';\nimport * as actionTypes from './actionTypes';\nimport { fromJS } from 'immutable';\nimport { Toast } from 'antd-mobile'\n\nconst getLoginInfo = (data) => ({\n  type: actionTypes.GET_LOGIN_INFO,\n  data: fromJS(data),\n})\n\nfunction verifyUserInfo(user) {\n  let flag = false\n  if (!user.user || !user.pwd) {\n    Toast.info('用户名密码必须输入！') \n    flag = true\n    return flag\n  }\n}\n\nexport const getLogin = (data) => {\n  return (dispatch) => {\n    debugger\n    if (verifyUserInfo(data)) return\n    Toast.loading('加载中...');\n    axios.post('/user/login', data).then(res => {\n      Toast.hide();\n      if (res.data.code === 0) {\n        dispatch(getLoginInfo(res.data.data))\n      } else if (res.data.code === 1) {\n        Toast.info(res.data.msg) \n      }\n    }, err => {\n      Toast.hide();\n      Toast.info('服务异常');\n    })\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}